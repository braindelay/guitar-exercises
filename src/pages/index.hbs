<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- 
			This is the main Handlebars template for the site 
			- When the user visits the homepage or submits a color the app calls the endpoints in server.js
			- The server script passes data in here and the Handlebars code builds it into the HTML page
			-->
		<meta charset="utf-8" />
		<link rel="icon" href="favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>{{seo.title}}</title>
		<!-- Meta tags for SEO and social sharing -->
		<link rel="canonical" href="{{seo.url}}">
		<meta name="description" content="{{seo.description}}">
		<meta property="og:title" content="{{seo.title}}">
		<meta property="og:type" content="article">
		<meta property="og:url" content="{{seo.url}}">
		<meta property="og:description" content="{{seo.description}}">
		<meta property="og:image" content="{{seo.image}}">
		<meta name="twitter:card" content="summary">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/abcjs/6.2.2/abcjs-basic-min.js" integrity="sha512-KXKtG2UKjAKEEwwKKNioYwVHGm/gH0ZmME+ePGFwbjs4Banx6+xJVtDpC2A2QM9nGtamOP4tqEYfxloLjq3XcA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		
		<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
		<script type="text/javascript" src="/exercises.js"></script>
		<script src="https://unpkg.com/fretboards/dist/fretboard.js"></script>
	</head>
	<body>
		<div class="container-fluid">
			<hr/>
			<div class="row">
				<!-- This is the start of content for our page -->
				<h1 class="title">Guitar Exercises</h1>
				<small><em>by <b>braindelay</b></em></small>
			</div>
			<hr/>
			<form id="practice">
				<input type="hidden" id="manualTone" name ="manualTone" />
				<input type="hidden" id="manualScale" name="manualScale" />
				<input type="hidden" id="manualExercise" name="manualExercise"/>
				<a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseConfigOptions" role="button" aria-expanded="false" aria-controls="collapseConfigOptions">
				Set up practice
				</a>
				<a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseChooseExercise" role="button" aria-expanded="false" aria-controls="collapseChooseExercise">
				Choose exercise
				</a>
				<div class="collapse collapseOnNextExercise" id="collapseConfigOptions">
					<div class="card card-body">
						<div class="row">
							<div class ="col-sm">
								<fieldset>
									<legend>What scales are you practicing?</legend>
									{{#scales}}
									<div>
										<input type="checkbox" class="scaleSelector" id="scale_{{name}}" name="scale_{{name}}" {{#default}}checked{{/default}}>
										<label for="scale_{{name}}"  >{{label}}</label>
									</div>
									{{/scales}}
								</fieldset>
							</div>
							<div class ="col-sm">
								<fieldset>
									<legend>What exercises are you practicing?</legend>
									{{#exercises}}
									<div>
										<input type="checkbox" class="exerciseSelector" id="exercise_{{name}}" name="exercise_{{name}}" {{#default}}checked{{/default}}>
										<label for="exercise_{{name}}">{{label}}</label>
									</div>
									{{/exercises}}
								</fieldset>
								<div>
									<fieldset>
										<legend>Other options</legend>
										<div>
											<label for="leftHanded">Left handed</label>
											<input type="checkbox" id="leftHanded" name="leftHanded">                                 
										</div>
									</fieldset>
									<fieldset>
										<div>
											<label for="tuning">Tuning</label>
											<select id="tuning" name="tuning"></select>                                 
										</div>
									</fieldset>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="collapse collapseOnNextExercise" id="collapseChooseExercise">
					<div class="card card-body">
						<div class="row" >
							<div class="col">
								<select id = "selectedTone" class="form-select chooseExercise" aria-label="Tones">
									{{#tones}}
									<option value="{{this}}">{{ this }}</option>
									{{/tones}}
								</select>
							</div>
							<div class="col">
								<select  id = "selectedScale" class="form-select chooseExercise" aria-label="Tones">
									{{#scales}}
									<option value="{{name}}">{{ label }}</option>
									{{/scales}}
								</select>
							</div>
							<div class="col">
								<select id = "selectedExercise" class="form-select chooseExercise" aria-label="Tones">
									{{#exercises}}
									<option value="{{name}}">{{ label }}</option>
									{{/exercises}}
								</select>
							</div>
						</div>
					</div>
				</div>
				<hr/>
				<button type="button" id="nextExercise" class="btn btn-success" onclick="loadNextExercise()">
						<span class="show-when-loading spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
						<span class="show-when-loading">Loading</span>
						<span class="hide-when-loading">Next random exercise from practice</span>
				</button>       
			</form>
			<hr/>
			<div id="loading-exercise-details" class="show-when-loading" >
				<div class="d-flex justify-content-center">
					<div class="spinner-border" role="status">
						<span class="sr-only"></span>
					</div>
				</div>
			</div>
			<div id="exercise-details" class="hide-when-loading" >
				<div class = "row">
					<h1>
						<span id = "headerTone"></span>
						<span id = "headerScale"></span>
						<span id = "headerExercise"></span>
					</h1>
				</div>
				<div class = "row">                  
					<span><i><small id="exerciseDescription"></small></i></span>  
				</div>
				<div class = "row">
					<div class = "col">
						<div class = "row">
							<div class = "col">
								<p><div id="notes"></div></p>
								<p><div id="staff"></div></p>
								
								<p><b>Fifths: </b>
									<span id="fifthBelow"></span>
									&#8592;
									<span id="fifthTone"></span> 
									&#8592;
									<span id="fifthAbove"></span> 
								</p>
								<p>
								<div id="chords"></div>
								</p>
							</div>
						</div>
						<div class = "row">
							<div class = "col"><b>Tuning:</b> <span id="tuningDescription"></span></div>
						</div>
						<div class = "row" id = "fb-container" 
							data-frets="23"  
							data-notes="" 
							data-showTitle="true">
						</div>						
					</div>
				</div>
			</div>
		</div>
		<script>
			$('document').ready(() => {
			                  
			   preparePage()
			   
			  clearLastExercise()
			  loadNextExercise()
			})
		</script>
		<hr/>
		<small><i>Available on <a href="https://github.com/braindelay/guitar-exercises" target="_blank">github</a></i></small>
		<hr/>
	</body>
</html>